import{Z as h,u as v,z as _,h as p,j as e,i as w,F as d,a as s,r as g,R as E,P as S,E as y,l as D,$ as I}from"./index-4c6f47ce.js";import{a as k,b as x,c as L}from"./board-784e201d.js";import R from"./WebtoonInfoDetail-4e7352fa.js";import{I as T}from"./Input-ed245c9f.js";import"./Input.styles-9a7fdf8e.js";h({key:"boardListState",default:null});h({key:"boardDataState",default:[]});const b=h({key:"commentState",default:null}),F=({boardDetailData:o})=>{const i=S(b),{data:a,refetch:t}=p(["commentList"],()=>k(o._id));return g.useEffect(()=>{t()},[i]),e("div",{className:"comment-lists",children:a&&a.length===0?e(y,{className:"no-comment",content:"아직 댓글이 없습니다. 첫 댓글을 작성해보세요!"}):e(d,{children:a==null?void 0:a.map(({_id:c,author:n,createdAt:r,comment:m})=>s("div",{className:"comment",children:[s("div",{className:"comment-user",children:[e("span",{className:"comment-img",children:e("img",{src:n.profileImage,width:24,height:24})}),s("div",{className:"nickname",children:[e("h5",{children:n.nickname}),e("span",{children:r.split("T")[0]})]})]}),e("div",{className:"comment-des",children:m})]},c))})})},j=({userInformation:o,boardDetailData:i})=>{const[a,t]=g.useState(""),c=E(b),n=new Date,r=n.getFullYear(),m=("0"+(n.getMonth()+1)).slice(-2),f=("0"+n.getDate()).slice(-2),N=r+"-"+m+"-"+f,C=async()=>{const l={board_id:i._id,comment:a.trim(),author:o._id,createdAt:N},u=await x(l);u.RESULT===200&&(t(""),c(u),D(I,"green"))};return s("section",{className:"webtoon-review",children:[e("div",{children:e("hr",{})}),e(F,{boardDetailData:i}),s("div",{className:"comment-container",children:[e("span",{className:"comment-img",children:e("img",{src:o.profileImage,width:28,height:28})}),e(T,{value:a,onChange:l=>t(l.target.value),className:"comment-input",placeholder:"댓글을 남겨주세요.",radius:"lg"}),e("span",{className:"comment-btn",children:e("button",{onClick:C,disabled:a.trim("")==="",children:"등록"})})]})]})},W=()=>{const{pathname:o}=v(),i=o.split("/")[3],{data:a}=_(),{data:t,isLoading:c,isError:n}=p([o],()=>L(i));return c?e(w,{}):n?e(d,{}):e("div",{className:"board-detail-global",children:t&&s(d,{children:[s("section",{className:"board-title-container",children:[e("h1",{children:t.title}),s("div",{className:"creater",children:[e("span",{className:"board-author-img",children:e("img",{src:t.author.profileImage,width:30,height:30})}),e("span",{className:"nickname",children:t.author.nickname})]})]}),e("section",{className:"webtoon-detail-container",children:e(R,{webtoon:t.webtoon})}),e("section",{className:"board-description-container",children:e("div",{children:t.description})}),e("section",{children:e(j,{userInformation:a&&a,boardDetailData:t&&t})})]})})};export{W as default};
