import{P as A,l as h,Q as G,N as T,r as l,j as e,a as s,aq as x,aa as q,ab as L,ar as f,as as O,O as P,at as W,ae as j}from"./index-5b0a59ef.js";import{S,i as K}from"./user-fe74cd42.js";import{I as i}from"./Input-99bb2273.js";const V=async(o,d)=>{try{const{data:r}=await A.post("/auth/signUp",d);return r}catch(r){throw h(G,"red"),new Error(r,`${o} 회원가입 에러`)}},B=o=>{const d=T(),r=l.useRef(),{platform:g,account:n,token:v,id:C}=o,b=n.email,E=g==="kakao"?n.profile.thumbnail_image_url:n.profile_image,[N,_]=l.useState(g==="kakao"?n.age_range:n.age.replace("-","~")),[k,R]=l.useState(n.gender==="M"||n.gender==="male"?"male":"female"),[c,y]=l.useState(""),[m,I]=l.useState("empty"),u=(a,t)=>{t==="nickname"?y(a.target.value):t==="age"?_(a):t==="gender"&&R(a)},U=async()=>{I(await K(c))},w=async a=>{const t={authToken:v,id:C,email:b,profileImage:E,nickname:c,age:N,gender:k};if(m==="available"){const p=await V(a,t);p.RESULT===200&&(f(O,p.user_data.authToken),f(P,p.jwtToken),d("/"),h(W,"green"))}else r.current.focus(),h(j,"yellow")};return e("div",{className:"regist-container",children:s("div",{className:"regist-form-group",children:[s("div",{className:"regist-title",children:[e(x,{}),e("h3",{children:"회원가입"})]}),s("div",{className:"regist-form",children:[e("div",{className:"regist-input",children:e(i.Wrapper,{label:"이메일",required:!0,children:e(i,{defaultValue:n.email,disabled:!0})})}),s("div",{className:"regist-input",children:[s(i.Wrapper,{label:"닉네임",required:!0,children:[" ",s("span",{style:{fontSize:"12px"},children:["(",c.length,"/8자)"]}),e(i,{maxLength:8,placeholder:"닉네임을 입력하세요.",onChange:a=>u(a,"nickname"),defaultValue:c,ref:r})]}),s("div",{className:"nickname-check",children:[m==="empty"?e("span",{className:"unavailable",children:"닉네임을 입력해주세요."}):m==="available"?e("span",{className:"available",children:"사용할 수 있는 닉네임입니다."}):e("span",{className:"unavailable",children:"이미 사용중인 닉네임입니다."}),e("button",{onClick:a=>U(),children:"중복체크"})]})]}),e("div",{className:"regist-input",children:e(i.Wrapper,{label:"나이",required:!0,children:e(S,{placeholder:"본인 연령대를 선택하세요.",data:q,defaultValue:N,onChange:a=>u(a,"age")})})}),e("div",{className:"regist-input",children:e(i.Wrapper,{label:"성별",required:!0,children:e(S,{placeholder:"성별을 선택하세요.",data:L,defaultValue:k,onChange:a=>u(a,"gender")})})})]}),e("div",{className:"regist-btn",children:e("button",{onClick:()=>w(g),children:"회원가입하기"})})]})})};export{B as S};
