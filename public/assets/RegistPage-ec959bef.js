import{p as V,r as c,m as _,q as W,n as B,a as e,j as l,$ as P,b as k,A as f,s as p}from"./index-1062e1fd.js";import{I as s}from"./Input-c8df33ff.js";import{S as j}from"./Select-e8f5c743.js";const z=[{value:"10~19",label:"10대"},{value:"20~29",label:"20대"},{value:"30~39",label:"30대"},{value:"40~49",label:"40대"},{value:"50~59",label:"50대"},{value:"60~69",label:"60대"}],D=[{value:"male",label:"남자"},{value:"female",label:"여자"}],K=E=>{const v=V(),b=c.useRef(),{platform:o,account:n,token:N,id:S}=E,C=n.email,I=o==="kakao"?n.profile.thumbnail_image_url:n.profile_image,[d,w]=c.useState(o==="kakao"?n.age_range:n.age.replace("-","~")),[u,x]=c.useState(n.gender==="M"||n.gender==="male"?"male":"female"),[H,R]=_(W),[J,T]=_(B),[i,U]=c.useState(""),[m,g]=c.useState("empty"),h=(a,r)=>{r==="nickname"?U(a.target.value):r==="age"?w(a):r==="gender"&&x(a)},y={nickname:i},A=()=>{if(i===""){g("empty");return}else k.post(f+"/auth/nickname/check",y).then(a=>{if(a.data.RESULT===200){g("available");return}else if(a.data.RESULT===403){g("unavailable");return}})},L={kakaoToken:N,id:S,email:C,profileImage:I,nickname:i,age:d,gender:u},q={naverToken:N,id:S,email:C,profileImage:I,nickname:i,age:d,gender:u},G=(a,r)=>{m==="available"?r==="kakao"?k.post(f+"/auth/kakaoSignUp",L).then(t=>{if(t.data.RESULT===200){R(t.data.jwtToken),T(t.data.user_data),localStorage.setItem("Authentication",t.data.jwtToken),localStorage.setItem("userId",t.data.user_data.id),v("/"),p({message:"정상적으로 회원가입되었습니다.",autoClose:2e3,radius:"md",color:"green"});return}}):r==="naver"&&k.post(f+"/auth/naverSignUp",q).then(t=>{if(t.data.RESULT===200){R(t.data.jwtToken),T(t.data.user_data),localStorage.setItem("Authentication",t.data.jwtToken),localStorage.setItem("userId",t.data.user_data.id),v("/"),p({message:"정상적으로 회원가입되었습니다.",autoClose:2e3,radius:"md",color:"green"});return}}):(b.current.focus(),p({message:"닉네임 중복체크를 해주세요.",autoClose:2e3,radius:"md",color:"red"}))};return e("div",{className:"regist-container",children:l("div",{className:"regist-form-group",children:[l("div",{className:"regist-title",children:[e(P,{}),e("h3",{children:"회원가입"})]}),l("div",{className:"regist-form",children:[e("div",{className:"regist-input",children:e(s.Wrapper,{label:"이메일",required:!0,children:e(s,{defaultValue:n.email,disabled:!0})})}),l("div",{className:"regist-input",children:[l(s.Wrapper,{label:"닉네임",required:!0,children:[" ",l("span",{style:{fontSize:"12px"},children:["(",i.length,"/8자)"]}),e(s,{maxLength:8,placeholder:"닉네임을 입력하세요.",onChange:a=>h(a,"nickname"),defaultValue:i,ref:b})]}),l("div",{className:"nickname-check",children:[m==="empty"?e("span",{className:"unavailable",children:"닉네임을 입력해주세요."}):m==="available"?e("span",{className:"available",children:"사용할 수 있는 닉네임입니다."}):e("span",{className:"unavailable",children:"이미 사용중인 닉네임입니다."}),e("button",{onClick:a=>A(),children:"중복체크"})]})]}),e("div",{className:"regist-input",children:e(s.Wrapper,{label:"나이",required:!0,children:e(j,{placeholder:"본인 연령대를 선택하세요.",data:z,defaultValue:d,onChange:a=>h(a,"age")})})}),e("div",{className:"regist-input",children:e(s.Wrapper,{label:"성별",required:!0,children:e(j,{placeholder:"성별을 선택하세요.",data:D,defaultValue:u,onChange:a=>h(a,"gender")})})})]}),e("div",{className:"regist-btn",children:e("button",{onClick:a=>G(a,o),children:"회원가입하기"})})]})})};export{K as R};
