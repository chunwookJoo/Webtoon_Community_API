import{u as _,m as d,r as c,b as h,A as u,a as e,j as o,F as f,n as k,s as b}from"./index-1062e1fd.js";import{a as g}from"./recoilBoardState-e0973af9.js";import y from"./WebtoonInfoDetail-e890463a.js";import{I as A}from"./Input-c8df33ff.js";import"./Input.styles-3b5c053d.js";const B=s=>{const[a,l]=d(g),[n,p]=c.useState();return c.useEffect(()=>{h.get(u+`/comment/${a._id}`).then(t=>{p(t.data)})},[s.commentState]),e("div",{className:"comment-lists",children:(n==null?void 0:n.length)===0?o("h6",{style:{textAlign:"center",paddingTop:"2rem"},children:["아직 댓글이 없습니다. ",e("br",{}),"첫 댓글을 작성해보세요."]}):e(f,{children:n==null?void 0:n.map((t,r)=>o("div",{className:"comment",children:[o("div",{className:"comment-user",children:[e("span",{className:"comment-img",children:e("img",{src:t==null?void 0:t.author.profileImage,width:24,height:24})}),o("div",{className:"nickname",children:[e("h5",{children:t==null?void 0:t.author.nickname}),e("span",{children:t==null?void 0:t.createdAt.split("T")[0]})]})]}),e("div",{className:"comment-des",children:t==null?void 0:t.comment})]},r))})})},E=()=>{const s=c.useRef(),[a,l]=d(k),[n,p]=d(g),[t,r]=c.useState(""),[N,v]=c.useState(),m=new Date,w=m.getFullYear(),C=("0"+(m.getMonth()+1)).slice(-2),I=("0"+m.getDate()).slice(-2),D=w+"-"+C+"-"+I,S={board_id:n._id,comment:t,author:a._id,createdAt:D},x=()=>{t===""?(b({message:"댓글을 입력해주세요.",autoClose:1500,radius:"md",color:"yellow"}),s.current.focus()):h.post(u+"/comment/insert",S).then(i=>{i.data.RESULT===200&&(r(""),v(i.data),b({message:"댓글을 정상적으로 등록했어요.",autoClose:1500,radius:"md",color:"green"}))})};return o("section",{className:"webtoon-review",children:[e("div",{children:e("hr",{})}),e(B,{commentState:N}),o("div",{className:"comment-container",children:[e("span",{className:"comment-img",children:e("img",{src:a.profileImage,width:28,height:28})}),e(A,{ref:s,value:t,onChange:i=>r(i.target.value),className:"comment-input",placeholder:"댓글을 남겨주세요.",radius:"lg"}),e("span",{className:"comment-btn",children:e("button",{onClick:x,children:"등록"})})]})]})},U=()=>{const{state:s}=_(),[a,l]=d(g);return c.useEffect(()=>{window.scrollTo(0,0),h.get(u+`/api/board/${s}`).then(n=>{l(n.data)})},[]),e("div",{className:"board-detail-global",children:a.length===0?"":o(f,{children:[o("section",{className:"board-title-container",children:[e("h1",{children:a.title}),o("div",{className:"creater",children:[e("span",{className:"board-author-img",children:e("img",{src:a.author.profileImage,width:30,height:30})}),e("span",{className:"nickname",children:a.author.nickname})]})]}),e("section",{className:"webtoon-detail-container",children:e(y,{webtoon:a.webtoon})}),e("section",{className:"board-description-container",children:e("div",{children:a.description})}),e("section",{children:e(E,{})})]})})};export{U as default};
