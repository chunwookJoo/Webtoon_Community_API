import{Y as h,u as v,y as _,f as p,j as e,h as w,F as d,a as s,r as g,R as y,O as E,E as S,k,Z as D}from"./index-2214438f.js";import{a as I,b as x,c as L}from"./board-e4b180c5.js";import R from"./WebtoonInfoDetail-c4ab8682.js";import{I as T}from"./Input-717c0f47.js";import"./Input.styles-95e8dac2.js";h({key:"boardListState",default:null});h({key:"boardDataState",default:[]});const f=h({key:"commentState",default:null}),F=({boardDetailData:o})=>{const i=E(f),{data:a,refetch:t}=p(["commentList"],()=>I(o._id));return g.useEffect(()=>{t()},[i]),e("div",{className:"comment-lists",children:a&&a.length===0?e(S,{className:"no-comment",content:"아직 댓글이 없습니다. 첫 댓글을 작성해보세요!"}):e(d,{children:a==null?void 0:a.map(({_id:c,author:n,createdAt:r,comment:m})=>s("div",{className:"comment",children:[s("div",{className:"comment-user",children:[e("span",{className:"comment-img",children:e("img",{alt:"사용자 프로필 사진",src:n.profileImage,width:24,height:24})}),s("div",{className:"nickname",children:[e("h5",{children:n.nickname}),e("span",{children:r.split("T")[0]})]})]}),e("div",{className:"comment-des",children:m})]},c))})})},j=({userInformation:o,boardDetailData:i})=>{const[a,t]=g.useState(""),c=y(f),n=new Date,r=n.getFullYear(),m=("0"+(n.getMonth()+1)).slice(-2),b=("0"+n.getDate()).slice(-2),N=r+"-"+m+"-"+b,C=async()=>{const l={board_id:i._id,comment:a.trim(),author:o._id,createdAt:N},u=await x(l);u.RESULT===200&&(t(""),c(u),k(D,"green"))};return s("section",{className:"webtoon-review",children:[e("div",{children:e("hr",{})}),e(F,{boardDetailData:i}),s("div",{className:"comment-container",children:[e("span",{className:"comment-img",children:e("img",{alt:"사용자 프로필 사진",src:o.profileImage,width:28,height:28})}),e(T,{value:a,onChange:l=>t(l.target.value),className:"comment-input",placeholder:"댓글을 남겨주세요.",radius:"lg"}),e("span",{className:"comment-btn",children:e("button",{onClick:C,disabled:a.trim("")==="",children:"등록"})})]})]})},W=()=>{const{pathname:o}=v(),i=o.split("/")[3],{data:a}=_(),{data:t,isLoading:c,isError:n}=p([o],()=>L(i));return c?e(w,{}):n?e(d,{}):e("div",{className:"board-detail-global",children:t&&s(d,{children:[s("section",{className:"board-title-container",children:[e("h1",{children:t.title}),s("div",{className:"creater",children:[e("span",{className:"board-author-img",children:e("img",{alt:t.title,src:t.author.profileImage,width:30,height:30})}),e("span",{className:"nickname",children:t.author.nickname})]})]}),e("section",{className:"webtoon-detail-container",children:e(R,{webtoon:t.webtoon})}),e("section",{className:"board-description-container",children:e("div",{children:t.description})}),e("section",{children:e(j,{userInformation:a&&a,boardDetailData:t&&t})})]})})};export{W as default};
