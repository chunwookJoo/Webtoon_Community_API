{"version":3,"file":"static/js/46.23441b6c.chunk.js","mappings":"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","sources":["pages/UserInfo.js"],"sourcesContent":["import { Avatar, Input, Select } from \"@mantine/core\";\r\nimport React, { useRef, useState } from \"react\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { userInfoState } from \"../utils/atom\";\r\nimport \"../assets/scss/pages/userinfo.scss\";\r\nimport axios from \"axios\";\r\nimport { API_URL } from \"../config\";\r\nimport { showNotification } from \"@mantine/notifications\";\r\n\r\nconst UserInfo = () => {\r\n\tconst { state } = useLocation();\r\n\tconst navigate = useNavigate();\r\n\tconst user = state;\r\n\tconst nicknameInput = useRef();\r\n\tconst profileImgInput = useRef();\r\n\r\n\tconst AGE_RANGE = [\r\n\t\t{ value: \"10~19\", label: \"10대\" },\r\n\t\t{ value: \"20~29\", label: \"20대\" },\r\n\t\t{ value: \"30~39\", label: \"30대\" },\r\n\t\t{ value: \"40~49\", label: \"40대\" },\r\n\t\t{ value: \"50~59\", label: \"50대\" },\r\n\t\t{ value: \"60~69\", label: \"60대\" },\r\n\t];\r\n\r\n\tconst GENDER = [\r\n\t\t{ value: \"male\", label: \"남자\" },\r\n\t\t{ value: \"female\", label: \"여자\" },\r\n\t];\r\n\r\n\tconst [userInfo, setUserInfo] = useRecoilState(userInfoState);\r\n\tconst [profileImagePreview, setProfileImagePreview] = useState(\r\n\t\tuser.profileImage,\r\n\t);\r\n\r\n\tconst [nickName, setNickName] = useState(user.nickname);\r\n\tconst [nicknameChecked, setNicknameChecked] = useState(\"empty\");\r\n\tconst [ageRange, setAgeRange] = useState(user.age);\r\n\tconst [gender, setGender] = useState(user.gender);\r\n\r\n\tconst onChangeHandler = (e, state) => {\r\n\t\tif (state === \"nickname\") setNickName(e.target.value);\r\n\t\telse if (state === \"age\") setAgeRange(e);\r\n\t\telse if (state === \"gender\") setGender(e);\r\n\t};\r\n\r\n\tconst onImgChange = async (e) => {\r\n\t\tconst formData = new FormData();\r\n\t\tencodeFileToBase64(e.target.files[0]);\r\n\t\tformData.append(\"images\", e.target.files[0]);\r\n\r\n\t\taxios({\r\n\t\t\tbaseURL: API_URL,\r\n\t\t\turl: `/auth/userinfo/profileimg/upload/${user.id}`,\r\n\t\t\tmethod: \"POST\",\r\n\t\t\tdata: formData,\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"multipart/form-data\",\r\n\t\t\t},\r\n\t\t}).then((response) => {\r\n\t\t\tconsole.log(response);\r\n\t\t});\r\n\t};\r\n\r\n\t// 프로필 사진 미리보기 인코딩\r\n\tconst encodeFileToBase64 = (fileBlob) => {\r\n\t\tconst reader = new FileReader();\r\n\t\treader.readAsDataURL(fileBlob);\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\treader.onload = () => {\r\n\t\t\t\tsetProfileImagePreview(reader.result);\r\n\t\t\t\tresolve();\r\n\t\t\t};\r\n\t\t});\r\n\t};\r\n\r\n\t// 프로필 사진 수정 버튼 클릭\r\n\tconst onProfileImgBtnClick = (e) => {\r\n\t\te.preventDefault();\r\n\t\tprofileImgInput.current.click();\r\n\t};\r\n\r\n\tconst nicknameBody = {\r\n\t\tnickname: nickName,\r\n\t};\r\n\r\n\t// 닉네임 중복 체크\r\n\tconst onClickNicknameCheck = () => {\r\n\t\tif (nickName === \"\") {\r\n\t\t\tsetNicknameChecked(\"empty\");\r\n\t\t\treturn;\r\n\t\t} else {\r\n\t\t\taxios\r\n\t\t\t\t.post(API_URL + \"/auth/nickname/check\", nicknameBody)\r\n\t\t\t\t.then((response) => {\r\n\t\t\t\t\tif (response.data.RESULT === 200) {\r\n\t\t\t\t\t\tsetNicknameChecked(\"available\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t} else if (response.data.RESULT === 403) {\r\n\t\t\t\t\t\tsetNicknameChecked(\"unavailable\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t// 회원정보 수정 데이터\r\n\tconst updateBody = {\r\n\t\tnickname: nickName,\r\n\t\tage: ageRange,\r\n\t\tgender,\r\n\t};\r\n\r\n\t// 회원정보 수정하기 버튼\r\n\tconst onClickUserInfoUpdate = () => {\r\n\t\tif (nicknameChecked === \"available\") {\r\n\t\t\taxios\r\n\t\t\t\t.post(API_URL + `/auth/userinfo/update/${user.id}`, updateBody)\r\n\t\t\t\t.then((response) => {\r\n\t\t\t\t\tif (response.data.RESULT === 200) {\r\n\t\t\t\t\t\tsetUserInfo(response.data.user);\r\n\t\t\t\t\t\tshowNotification({\r\n\t\t\t\t\t\t\tmessage: \"프로필이 수정되었습니다.\",\r\n\t\t\t\t\t\t\tautoClose: 2000,\r\n\t\t\t\t\t\t\tradius: \"md\",\r\n\t\t\t\t\t\t\tcolor: \"green\",\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tnavigate(\"/\");\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tnicknameInput.current.focus();\r\n\t\t\tshowNotification({\r\n\t\t\t\tmessage: \"닉네임 중복체크를 해주세요.\",\r\n\t\t\t\tautoClose: 2000,\r\n\t\t\t\tradius: \"md\",\r\n\t\t\t\tcolor: \"red\",\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"userinfo-container\">\r\n\t\t\t<div className=\"profile-img-container\">\r\n\t\t\t\t<Avatar\r\n\t\t\t\t\tsize={120}\r\n\t\t\t\t\tsrc={profileImagePreview}\r\n\t\t\t\t\tradius=\"xl\"\r\n\t\t\t\t\tclassName=\"profile-img\"\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<div style={{ fontWeight: \"bold\" }}>{user.email}</div>\r\n\t\t\t\t<div className=\"profile-img-edit\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tstyle={{ display: \"none\" }}\r\n\t\t\t\t\t\tref={profileImgInput}\r\n\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\tclassName=\"imgInput\"\r\n\t\t\t\t\t\taccept=\"image/*\"\r\n\t\t\t\t\t\tname=\"file\"\r\n\t\t\t\t\t\tonChange={(e) => onImgChange(e)}\r\n\t\t\t\t\t></input>\r\n\t\t\t\t\t<button onClick={onProfileImgBtnClick}>사진 수정</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"profile-input\">\r\n\t\t\t\t<Input.Wrapper label=\"닉네임\" required>\r\n\t\t\t\t\t&nbsp;\r\n\t\t\t\t\t<span style={{ fontSize: \"12px\" }}>({nickName.length}/8자)</span>\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tmaxLength={8}\r\n\t\t\t\t\t\tplaceholder=\"닉네임을 입력하세요.\"\r\n\t\t\t\t\t\tonChange={(e) => onChangeHandler(e, \"nickname\")}\r\n\t\t\t\t\t\tdefaultValue={nickName}\r\n\t\t\t\t\t\tref={nicknameInput}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Input.Wrapper>\r\n\t\t\t\t<div className=\"nickname-check\">\r\n\t\t\t\t\t<button onClick={(e) => onClickNicknameCheck(e)}>중복체크</button>\r\n\t\t\t\t\t{nicknameChecked === \"empty\" ? (\r\n\t\t\t\t\t\t<span className=\"unavailable\">닉네임 중복체크를 해주세요.</span>\r\n\t\t\t\t\t) : nicknameChecked === \"available\" ? (\r\n\t\t\t\t\t\t<span className=\"available\">사용할 수 있는 닉네임입니다.</span>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<span className=\"unavailable\">이미 사용중인 닉네임입니다.</span>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"profile-input\">\r\n\t\t\t\t<Input.Wrapper label=\"나이\" required>\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tplaceholder=\"본인 연령대를 선택하세요.\"\r\n\t\t\t\t\t\tdata={AGE_RANGE}\r\n\t\t\t\t\t\tdefaultValue={ageRange}\r\n\t\t\t\t\t\tonChange={(e) => onChangeHandler(e, \"age\")}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Input.Wrapper>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"profile-input\">\r\n\t\t\t\t<Input.Wrapper label=\"성별\" required>\r\n\t\t\t\t\t<Select\r\n\t\t\t\t\t\tplaceholder=\"성별을 선택하세요.\"\r\n\t\t\t\t\t\tdata={GENDER}\r\n\t\t\t\t\t\tdefaultValue={gender}\r\n\t\t\t\t\t\tonChange={(e) => onChangeHandler(e, \"gender\")}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Input.Wrapper>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"profile-btn\">\r\n\t\t\t\t<button onClick={onClickUserInfoUpdate}>프로필 수정하기</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default UserInfo;\r\n"],"names":["state","useLocation","navigate","useNavigate","user","nicknameInput","useRef","profileImgInput","useRecoilState","userInfoState","setUserInfo","useState","profileImage","profileImagePreview","setProfileImagePreview","nickname","nickName","setNickName","nicknameChecked","setNicknameChecked","age","ageRange","setAgeRange","gender","setGender","onChangeHandler","e","target","value","onImgChange","formData","FormData","encodeFileToBase64","files","append","axios","baseURL","API_URL","url","id","method","data","headers","then","response","console","log","fileBlob","reader","FileReader","readAsDataURL","Promise","resolve","onload","result","nicknameBody","updateBody","className","Avatar","size","src","radius","style","fontWeight","email","display","ref","type","accept","name","onChange","onClick","preventDefault","current","click","Input","I","label","required","fontSize","length","maxLength","placeholder","defaultValue","RESULT","Select","showNotification","message","autoClose","color","setTimeout","focus"],"sourceRoot":""}