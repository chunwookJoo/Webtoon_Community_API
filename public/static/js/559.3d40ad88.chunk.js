"use strict";(self.webpackChunkwebtoon_client=self.webpackChunkwebtoon_client||[]).push([[559],{1559:function(e,a,n){n.r(a),n.d(a,{default:function(){return b}});var l=n(4165),t=n(5861),i=n(885),r=n(2791),s=n(6871),c=n(4569),u=n.n(c),o=n(3197),d=n(5587),f=n(4746),p=n(2667),m=n(3090),h=n(6005),v=n(2708),g=n(184),b=function(){var e=(0,s.TH)().state,a=(0,s.s0)(),n=e,c=(0,r.useRef)(),b=(0,r.useRef)(),x=(0,h.FV)(v.E),j=(0,i.Z)(x,2),k=(j[0],j[1]),N=(0,r.useState)(n.profileImage),C=(0,i.Z)(N,2),y=C[0],S=C[1],T=(0,r.useState)(n.nickname),w=(0,i.Z)(T,2),Z=w[0],R=w[1],I=(0,r.useState)("empty"),L=(0,i.Z)(I,2),U=L[0],q=L[1],E=(0,r.useState)(n.age),P=(0,i.Z)(E,2),V=P[0],W=P[1],D=(0,r.useState)(n.gender),F=(0,i.Z)(D,2),z=F[0],_=F[1],A=function(e,a){"nickname"===a?R(e.target.value):"age"===a?W(e):"gender"===a&&_(e)},H=function(){var e=(0,t.Z)((0,l.Z)().mark((function e(a){var t;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new FormData,O(a.target.files[0]),t.append("images",a.target.files[0]),u()({baseURL:o.T5,url:"/auth/userinfo/profileimg/upload/".concat(n.id),method:"POST",data:t,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),O=function(e){var a=new FileReader;return a.readAsDataURL(e),new Promise((function(e){a.onload=function(){S(a.result),e()}}))},B={nickname:Z},G={nickname:Z,age:V,gender:z};return(0,g.jsxs)("div",{className:"userinfo-container",children:[(0,g.jsxs)("div",{className:"profile-img-container",children:[(0,g.jsx)(d.q,{size:120,src:y,radius:"xl",className:"profile-img"}),(0,g.jsx)("div",{style:{fontWeight:"bold"},children:n.email}),(0,g.jsxs)("div",{className:"profile-img-edit",children:[(0,g.jsx)("input",{style:{display:"none"},ref:b,type:"file",className:"imgInput",accept:"image/*",name:"file",onChange:function(e){return H(e)}}),(0,g.jsx)("button",{onClick:function(e){e.preventDefault(),b.current.click()},children:"\uc0ac\uc9c4 \uc218\uc815"})]})]}),(0,g.jsxs)("div",{className:"profile-input",children:[(0,g.jsxs)(f.I.Wrapper,{label:"\ub2c9\ub124\uc784",required:!0,children:["\xa0",(0,g.jsxs)("span",{style:{fontSize:"12px"},children:["(",Z.length,"/8\uc790)"]}),(0,g.jsx)(f.I,{maxLength:8,placeholder:"\ub2c9\ub124\uc784\uc744 \uc785\ub825\ud558\uc138\uc694.",onChange:function(e){return A(e,"nickname")},defaultValue:Z,ref:c})]}),(0,g.jsxs)("div",{className:"nickname-check",children:[(0,g.jsx)("button",{onClick:function(e){""!==Z?u().post(o.T5+"/auth/nickname/check",B).then((function(e){200!==e.data.RESULT?403!==e.data.RESULT||q("unavailable"):q("available")})):q("empty")},children:"\uc911\ubcf5\uccb4\ud06c"}),"empty"===U?(0,g.jsx)("span",{className:"unavailable",children:"\ub2c9\ub124\uc784 \uc911\ubcf5\uccb4\ud06c\ub97c \ud574\uc8fc\uc138\uc694."}):"available"===U?(0,g.jsx)("span",{className:"available",children:"\uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \ub2c9\ub124\uc784\uc785\ub2c8\ub2e4."}):(0,g.jsx)("span",{className:"unavailable",children:"\uc774\ubbf8 \uc0ac\uc6a9\uc911\uc778 \ub2c9\ub124\uc784\uc785\ub2c8\ub2e4."})]})]}),(0,g.jsx)("div",{className:"profile-input",children:(0,g.jsx)(f.I.Wrapper,{label:"\ub098\uc774",required:!0,children:(0,g.jsx)(p.Ph,{placeholder:"\ubcf8\uc778 \uc5f0\ub839\ub300\ub97c \uc120\ud0dd\ud558\uc138\uc694.",data:[{value:"10~19",label:"10\ub300"},{value:"20~29",label:"20\ub300"},{value:"30~39",label:"30\ub300"},{value:"40~49",label:"40\ub300"},{value:"50~59",label:"50\ub300"},{value:"60~69",label:"60\ub300"}],defaultValue:V,onChange:function(e){return A(e,"age")}})})}),(0,g.jsx)("div",{className:"profile-input",children:(0,g.jsx)(f.I.Wrapper,{label:"\uc131\ubcc4",required:!0,children:(0,g.jsx)(p.Ph,{placeholder:"\uc131\ubcc4\uc744 \uc120\ud0dd\ud558\uc138\uc694.",data:[{value:"male",label:"\ub0a8\uc790"},{value:"female",label:"\uc5ec\uc790"}],defaultValue:z,onChange:function(e){return A(e,"gender")}})})}),(0,g.jsx)("div",{className:"profile-btn",children:(0,g.jsx)("button",{onClick:function(){"available"===U?u().post(o.T5+"/auth/userinfo/update/".concat(n.id),G).then((function(e){200===e.data.RESULT&&(k(e.data.user),(0,m.c0)({message:"\ud504\ub85c\ud544\uc774 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",autoClose:2e3,radius:"md",color:"green"}),setTimeout((function(){a("/")}),1e3))})):(c.current.focus(),(0,m.c0)({message:"\ub2c9\ub124\uc784 \uc911\ubcf5\uccb4\ud06c\ub97c \ud574\uc8fc\uc138\uc694.",autoClose:2e3,radius:"md",color:"red"}))},children:"\ud504\ub85c\ud544 \uc218\uc815\ud558\uae30"})})]})}}}]);
//# sourceMappingURL=559.3d40ad88.chunk.js.map